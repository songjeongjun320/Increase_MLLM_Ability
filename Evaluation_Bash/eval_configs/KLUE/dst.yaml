task: dst
dataset_path: klue
dataset_name: wos  # DST(Dialogue State Tracking)의 정확한 dataset_name
test_split: validation

output_type: generate_until

generation_kwargs:
  until: ["\n\n", "\n"]
  max_gen_toks: 200
  temperature: 0.0

metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true

description: "대화에서 현재 상태의 슬롯-값 쌍을 예측하세요."

# WoS 데이터: 마지막 사용자 발화와 그 상태 추출
doc_to_text: |
  {% set last_user_turn = none %}
  {% for turn in dialogue %}
    {% if turn.role == "user" %}
      {% set last_user_turn = turn %}
    {% endif %}
  {% endfor %}
  대화: {{ last_user_turn.text if last_user_turn else '' }}

  현재 대화 상태를 예측하세요 (형식: 도메인-슬롯-값):

# 마지막 사용자 턴의 state 추출
doc_to_target: |
  {% set last_user_turn = none %}
  {% for turn in dialogue %}
    {% if turn.role == "user" %}
      {% set last_user_turn = turn %}
    {% endif %}
  {% endfor %}
  {{ last_user_turn.state|join(', ') if last_user_turn and last_user_turn.state else 'none' }}

filter_list:
  - name: "whitespace"
    filter:
      - function: "take_first"

fewshot_config:
  sampler: first_n

num_fewshot: 1  # DST는 매우 복잡하므로 최소 few-shot
should_decontaminate: true
metadata:
  version: 1.0