task: gsm8k_en_hf
dataset_path: gsm8k
test_split: test
output_type: generate_until
generation_kwargs:
  until: ["\n\n", "\nQ:", "<|im_end|>", "Question:"]
  max_gen_toks: 1024
  temperature: 0.0
  do_sample: false
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
description: "Solve math problems step by step and provide the final numerical answer."

doc_to_text: |
  Question: {{question}}
  
  Let me solve this step by step:

filter_list:
  - name: "extract-answer"
    filter:
      - function: "regex"
        # #### 형태와 영어 답변 형태 모두 포착
        regex_pattern: "(?:answer is|the answer is|answer:|therefore|thus|so|total|####|\\$)\\s*([+-]?\\d+(?:,\\d{3})*(?:\\.\\d+)?)"
      - function: "take_first"

fewshot_config:
  sampler: first_n
doc_to_target: "answer"
num_fewshot: 8
should_decontaminate: true
metadata:
  version: 1.0